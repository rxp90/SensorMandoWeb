<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <ui:composition template="/WEB-INF/templates/layout.xhtml">
            <ui:define name="content">
                <h:panelGroup rendered="#{userControllerBean.admin}" id="administrarRed" layout="block" class="span9">
                    <fieldset>
                        <legend>Administrar red</legend>
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#crearRed" data-toggle="tab">Crear red</a></li>
                            <li><a href="#crearReceptor" data-toggle="tab">Crear receptor</a></li>
                            <li><a href="#crearMando" data-toggle="tab">Crear mando</a></li>

                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="crearRed">
                                <h:form id="formCrearRed" class="form-horizontal">
                                    <h:panelGroup id="nombrePanel" layout="block" styleClass="#{(!nombreInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Nombre" for="nombreInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-info-sign"></i></span>         
                                                <h:inputText binding="#{nombreInput}" value="#{administrarRedBean.red.nombre}" id="nombreInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="nombreInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="idPanel" layout="block" styleClass="#{(!idInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="ID" for="idInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-certificate"></i></span>         
                                                <h:inputText binding="#{idInput}" value="#{administrarRedBean.red.idRed}" id="idInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="idInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="canalPanel" layout="block" styleClass="#{(!canalInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Canal" for="canalInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-bullhorn"></i></span>         
                                                <h:inputText binding="#{canalInput}" value="#{administrarRedBean.red.canal}" id="canalInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="canalInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="puertoPanel" layout="block" styleClass="#{(!puertoInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Puerto" for="puertoInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-filter"></i></span>         
                                                <h:inputText binding="#{puertoInput}" value="#{administrarRedBean.red.puerto}" id="puertoInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="puertoInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="ipPanel" layout="block" styleClass="#{(!ipInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="IP" for="ipInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-globe"></i></span>         
                                                <h:inputText binding="#{ipInput}" value="#{administrarRedBean.red.ip}" id="ipInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="ipInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <div class="btn-group pull-right">
                                        <h:commandButton type="submit" class="btn btn-large btn-primary" action="#{administrarRedBean.crearRed()}" value="Crear red">
                                            <f:ajax execute="@form" render=":administrarRed"/>
                                        </h:commandButton>
                                        <h:commandButton type="reset" class="btn btn-large" value="Limpiar"/>
                                    </div>
                                </h:form>
                            </div>
                            <div class="tab-pane" id="crearMando">
                                <h:form id="formCrearMando" class="form-horizontal">
                                    <h:panelGroup id="nombreMandoPanel" layout="block" styleClass="#{(!nombreMandoInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Nombre" for="nombreMandoInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-info-sign"></i></span>         
                                                <h:inputText binding="#{nombreMandoInput}" value="#{administrarRedBean.mando.nombre}" id="nombreMandoInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="nombreMandoInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="direccionMandoPanel" layout="block" styleClass="#{(!direccionMandoInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Dirección" for="direccionMandoInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-bullhorn"></i></span>         
                                                <h:inputText binding="#{direccionMandoInput}" value="#{administrarRedBean.mando.direccion}" id="direccionMandoInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="direccionMandoInput"/>
                                        </div>
                                    </h:panelGroup> 
                                    <div class="control-group">
                                        <h:outputLabel value="Selecciona un receptor" for="redReceptorInput" class="control-label"/>
                                        <div class="controls">                     
                                            <h:selectOneMenu value="#{administrarRedBean.idReceptorSeleccionado}" id="receptorMandoInput">
                                                <f:selectItems value="#{administrarRedBean.receptores}" var="receptorLista" itemLabel="#{receptorLista.nombre}" itemValue="#{receptorLista.id}"/>
                                            </h:selectOneMenu>
                                        </div>
                                    </div>  
                                    <h:panelGroup layout="block" class="alert alert-warning" rendered="#{empty administrarRedBean.receptores}">
                                        <h4 class="alert-heading">        
                                            <h:outputText value="No hay receptores."/>
                                        </h4>
                                        <h:outputText value="Antes de crear un mando necesitas crear un receptor al que asociarlo."/>
                                    </h:panelGroup>    
                                    <div class="btn-group pull-right">
                                        <h:commandButton type="submit" disabled="#{empty administrarRedBean.receptores}" class="btn btn-large btn-primary" action="#{administrarRedBean.crearMando()}" value="Crear mando">
                                            <f:ajax execute="@form" render=":administrarRed"/>
                                        </h:commandButton>
                                        <h:commandButton type="reset" class="btn btn-large" value="Limpiar"/>
                                    </div>
                                </h:form>
                            </div>
                            <div class="tab-pane" id="crearReceptor">
                                <h:form id="formCrearReceptor" class="form-horizontal">
                                    <h:panelGroup id="nombreReceptorPanel" layout="block" styleClass="#{(!nombreReceptorInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Nombre" for="nombreReceptorInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-info-sign"></i></span>         
                                                <h:inputText binding="#{nombreReceptorInput}" value="#{administrarRedBean.receptor.nombre}" id="nombreReceptorInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="nombreReceptorInput"/>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup id="direccionReceptorPanel" layout="block" styleClass="#{(!direccionReceptorInput.valid) ?'control-group error':'control-group'}">
                                        <h:outputLabel value="Dirección" for="direccionReceptorInput" class="control-label"/>
                                        <div class="controls">
                                            <div class="input-prepend">
                                                <span class="add-on"><i class="icon-bullhorn"></i></span>         
                                                <h:inputText binding="#{direccionReceptorInput}" value="#{administrarRedBean.receptor.direccion}" id="direccionReceptorInput" required="true"/>
                                            </div>
                                            <h:message class="help-inline" for="direccionReceptorInput"/>
                                        </div>
                                    </h:panelGroup>  
                                    <div class="control-group">
                                        <h:outputLabel value="Selecciona una red" for="redReceptorInput" class="control-label"/>
                                        <div class="controls">                     
                                            <h:selectOneMenu value="#{administrarRedBean.idRedSeleccionado}" id="redReceptorInput">
                                                <f:selectItems value="#{administrarRedBean.redes}" var="redLista" itemLabel="#{redLista.nombre}" itemValue="#{redLista.id}"/>
                                            </h:selectOneMenu>
                                        </div>
                                    </div>          
                                    <h:panelGroup layout="block" class="alert alert-warning" rendered="#{empty administrarRedBean.redes}">
                                        <h4 class="alert-heading">        
                                            <h:outputText value="No hay redes."/>
                                        </h4>
                                        <h:outputText value="Antes de crear un receptor necesitas crear una red a la que asociarlo."/>
                                    </h:panelGroup>            
                                    <div class="btn-group pull-right">
                                        <h:commandButton type="submit"  disabled="#{empty administrarRedBean.redes}"  class="btn btn-large btn-primary" action="#{administrarRedBean.crearReceptor()}" value="Crear receptor">
                                            <f:ajax execute="@form" render=":administrarRed"/>
                                        </h:commandButton>
                                        <h:commandButton type="reset" class="btn btn-large" value="Limpiar"/>
                                    </div>
                                </h:form>
                            </div>
                        </div>

                    </fieldset>  
                    <h:panelGroup id="mensajesError">
                        <h:panelGroup layout="block" class="alert alert-error" rendered="#{administrarRedBean.exito eq administrarRedBean.ERROR}">
                            <button type="button" class="close" data-dismiss="alert">×</button>
                            <h4 class="alert-heading">        
                                <h:outputText value="Error."/>
                            </h4>
                            <h:outputText value="Ocurrió un error al crear el objeto. Inténtelo de nuevo."/>
                        </h:panelGroup>
                        <h:panelGroup layout="block" class="alert alert-success" rendered="#{administrarRedBean.exito eq administrarRedBean.CORRECTO}">
                            <button type="button" class="close" data-dismiss="alert">×</button>
                            <h4 class="alert-heading">        
                                <h:outputText value="¡Hurra!"/>
                            </h4>
                            <h:outputText value="La operación se realizó con éxito."/>
                        </h:panelGroup>
                    </h:panelGroup>
                </h:panelGroup>
            </ui:define>
        </ui:composition>
    </h:body>
</html>